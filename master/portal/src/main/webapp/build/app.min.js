/*! nj-portal 14-07-2016 */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():(a.portal=a.portal||{},a.portal.ac=b())}(this,function(){return{modules:{core:{module:{name:"core.module"}},header:{module:{name:"header.module"}},breadcrumb:{module:{name:"breadcrumb.module"}},mainMenu:{module:{name:"main-menu.module"}},mainArea:{module:{name:"main-area.module"}},designer:{module:{name:"designer.module"}},dashboard:{module:{name:"dashboard.module"}},widget:{module:{name:"widget.module"}}},controllers:{core:"core.ctrl",header:"header.ctrl",breadcrumb:"breadcrumb.ctrl",mainMenu:"main-menu.ctrl",mainArea:"main-area.ctrl",designer:"designer.ctrl",dashboard:"dashboard.ctrl",widget:"widget.ctrl"},directives:{core:{},header:{name:"njHeader",tUrl:"ngApp/core/header/header.view.html"},breadcrumb:{name:"njBreadcrumb",tUrl:"ngApp/core/breadcrumb/breadcrumb.view.html"},mainMenu:{name:"njMainMenu",tUrl:"ngApp/core/main-menu/main-menu.view.html"},mainArea:{name:"njMainArea",tUrl:"ngApp/core/main-area/main-area.view.html"},dashboard:{name:"njDashboard",tUrl:"ngApp/designer/dashboard/dashboard.view.html"},widget:{name:"njWidget",tUrl:"ngApp/designer/widget/widget.view.html"}},factories:{},services:{core:"core.srvc",request:"request.srvc"},jsonPath:{widgetExpData:"ngApp/designer/widget-exp/widget-exp.data.json",dashboardData:"ngApp/designer/dashboard/dashboard.data.json"},ngPlugins:{ngRoute:"ngRoute",ngAnimate:"ngAnimate",uiJquery:"ui.jquery",njUtil:"nj.util",toaster:"toaster",cfpHotkeys:"cfp.hotkeys"},ngVars:{scope:"$scope",http:"$http",timeout:"$timeout",routeProvider:"$routeProvider"}}}),function(a,b){"use strict";"function"==typeof define&&define.amd||"object"==typeof module&&module.exports||(a.portal=a.portal||{},a.portal.hmm=b(angular))}(this,function(a){function b(){this.steps=10,this.historyCount=0,this.historyMap={},this.$get=function(){var a=this;return{undo:function(b){return a.historyMap[b].historyStack[--a.historyMap[b].pointer]},redo:function(b){return a.historyMap[b].pointer!=a.steps?a.historyMap[b].historyStack[++a.historyMap[b].pointer]:void 0},register:function(b,d){a.historyMap[b]=new c(d||a.steps)},add:function(b,c){a.historyCount<=a.steps?(a.historyMap[b].historyStack.push(c),a.historyMap[b].pointer++,a.historyCount++):(a.historyMap[b].historyStack.shift(),a.historyMap[b].historyStack.push(c))}}}}function c(a){this.steps=a,this.historyStack=[],this.pointer=-1}a.module("nj.history",[]).provider("historyManager",[b])}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports||b(a.angular)}(this,function(a){function b(){return{restrict:"A",link:function(a,b,c){a.$last&&a.$eval(c.repeatEnd)}}}function c(){return function(b,c,d){if(!c)return b;var e,f=c.toLowerCase(),g=[];return a.forEach(b,function(a,b){"object"==typeof a?a.hasOwnProperty(d)&&(e=a[d].toString().toLowerCase(),-1!=e.indexOf(f)&&g.push(a)):(e=a.toString().toLowerCase(),-1!=e.indexOf(f)&&g.push(a))}),g}}function d(a){return{restrict:"A",link:function(b,c,d,e){var f=a(d.njCxtMenu)(b);"object"!=typeof b.$root.cxtMenuList&&(b.$root.cxtMenuList={},b.$root.cnt=0,$(document).on("click",function(a){$(".dropdown-menu").parent().removeClass("open")})),c.data("cmi",++b.$root.cnt),b.$root.cxtMenuList[b.$root.cnt]=f,c.on("contextmenu",function(a){function c(a){return a.clientX+$(".cxt-menu").width()>$("body").width()?$("body").width()-$(".cxt-menu").width()-10:a.clientX}function d(a){return a.clientY+$(".cxt-menu").height()>$("body").height()?$("body").height()-$(".cxt-menu").height()-20:a.clientY}a.preventDefault(),a.stopPropagation();var e=$(a.target).closest("[ nj-cxt-menu ]").data("cmi");b.$apply(function(){var f=b.$root.cxtMenuList[e].setOptionList;"function"==typeof f&&(b.$root.opnList=f.call(this,a)),b.$root.opnClicked=b.$root.cxtMenuList[e].opnClicked,b.$root.menuPos={left:c(a),top:d(a)},$(".dropdown-menu").parent().removeClass("open"),$(".cxt-menu").parent().addClass("dropdown open").css("position","initial")})})}}}function e(a){return{restrict:"E",template:'<ul ng-style="$root.menuPos" class="dropdown-menu cxt-menu"><li ng-class="{ \'divider\': opn.divider }" ng-repeat="opn in $root.opnList" ng-click="$root.opnClicked( $event, opn )"><a>{{opn.label}}</a></li></ul>',link:function(a,b,c,d){}}}a.module("nj.util",[]).directive("njCxtMenu",["$parse",d]).directive("cxtMenuBox",["$parse",e]).filter("search",[c]).directive("repeatEnd",[b])}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports||b(a.angular)}(this,function(a){function b(a){return{restrict:"A",link:function(b,c,d,e){var f=a(d.jqDraggable)(b),g=a(d.dragData)(b);c.draggable(f).data("dragData",g)}}}function c(a){return{restrict:"A",link:function(b,c,d,e){var f=a(d.jqDroppable)(b);c.droppable(f)}}}function d(a){return{restrict:"A",link:function(b,c,d,e){var f=a(d.jqResizable)(b);c.resizable(f)}}}function e(a){return{restrict:"A",link:function(b,c,d,e){var f=a(d.jqSortable)(b);c.sortable(f)}}}function f(a){return{restrict:"A",link:function(b,c,d,e){var f=a(d.jqSelectable)(b);c.selectable(f)}}}a.module("ui.jquery",[]).controller("ui.jquery.ctrl",[]).directive("jqDraggable",["$parse",b]).directive("jqDroppable",["$parse",c]).directive("jqResizable",["$parse",d]).directive("jqSortable",["$parse",e]).directive("jqSelectable",["$parse",f])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.breadcrumb.module=b(a.portal.ac,a.angular)}}(this,function(a,b){return b.module(a.modules.breadcrumb.module.name,[])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.core.module=b(a.portal.ac,a.angular)}}(this,function(a,b){function c(a){a.when("/designer",{templateUrl:"ngApp/designer/designer.view.html",controller:"designer.ctrl"}).otherwise({redirectTo:"/designer"})}return b.module(a.modules.core.module.name,[a.ngPlugins.ngRoute,a.ngPlugins.ngAnimate,a.ngPlugins.uiJquery,a.ngPlugins.njUtil,a.ngPlugins.toaster,a.ngPlugins.cfpHotkeys,a.modules.header.module.name,a.modules.breadcrumb.module.name,a.modules.mainMenu.module.name,a.modules.mainArea.module.name,a.modules.designer.module.name]).config([a.ngVars.routeProvider,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.header.module=b(a.portal.ac,a.angular)}}(this,function(a,b){return b.module(a.modules.header.module.name,[])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.mainArea.module=b(a.portal.ac,a.angular)}}(this,function(a,b){"use strict";return b.module(a.modules.mainArea.module.name,[])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports)module.exports=b(require("ac"),require("angular"));else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.mainMenu.module=b(a.portal.ac,a.angular)}}(this,function(a,b){"use strict";return b.module(a.modules.mainMenu.module.name,[])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.dashboard.module=b(a.portal.ac,a.angular)}}(this,function(a,b){return b.module(a.modules.dashboard.module.name,[a.modules.widget.module.name])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.designer.module=b(a.portal.ac,a.angular)}}(this,function(a,b){return b.module(a.modules.designer.module.name,[a.modules.dashboard.module.name])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";a.portal.ac.modules.widget.module=b(a.portal.ac,a.angular)}}(this,function(a,b){return b.module(a.modules.widget.module.name,[])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","bcm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.breadcrumb.module)}}(this,function(a,b){function c(a){}b.controller(a.controllers.breadcrumb,[a.ngVars.scope,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","cm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.core.module)}}(this,function(a,b){function c(a,b,c){a.init=function(){a.cs=b,a.fullMainMenu=!1,a.mouseOverCnt=0,b.cxtMenuPosition={},a.selectHelper={position:"absolute",zIndex:"1000",border:"1px solid #2196f3",background:"rgba(33, 150, 243, 0.1)"}},a.toggleMainMenu=function(b,c){c?(a.mouseOverCnt++,2==a.mouseOverCnt&&(a.fullMainMenu=!0,a.mouseOverCnt=0)):a.fullMainMenu=!1}}b.controller(a.controllers.core,[a.ngVars.scope,a.services.core,a.ngVars.timeout,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","hm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.header.module)}}(this,function(a,b){function c(a){a.init=function(){}}b.controller(a.controllers.header,[a.ngVars.scope,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","mam"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.mainArea.module)}}(this,function(a,b){function c(a){a.init=function(){},a.getMainAreaToggleClasses=function(){return{"clg-wrapper-full":!a.fullMainMenu,"clg-wrapper-hf":a.fullMainMenu}}}b.controller(a.controllers.mainArea,[a.ngVars.scope,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","mmm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.mainMenu.module)}}(this,function(a,b){function c(a,b,c){a.init=function(){function b(b){a.mainMenuList=b}var d="ngApp/core/main-menu/main-menu.data.json";c.getJson(d,b)},a.getMenuToggleClasses=function(){return{"clg-hf-menu":!a.fullMainMenu,"clg-full-menu":a.fullMainMenu}},a.handleMainMenuClick=function(a,b){}}b.controller(a.controllers.mainMenu,[a.ngVars.scope,a.services.core,a.services.request,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","dbm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.dashboard.module)}}(this,function(a,b){function c(a,b,c,d){a.init=function(){a.aboutToSelectList=[],a.dragSelectConfig={selectHelper:".selectHelper",start:function(c,d){$(".dropdown-menu").parent().removeClass("open"),b(function(){a.deSelectAllWidget()},0)},selecting:function(b,c){a.aboutToSelectList.push(c.selecting.id)},unselecting:function(b,c){var d=c.unselecting.id,e=a.aboutToSelectList.indexOf(d);a.aboutToSelectList.splice(e,1)},stop:function(c,d){var e,f;b(function(){a.deSelectAllWidget();for(var b=0;b<a.aboutToSelectList.length;b++)f=a.aboutToSelectList[b],e=a.getSelectedDashboard().Info.WidgetMap[f],a.selectWidget(e)},0)},filter:".widget"},a.dashboardDropConfig={accept:".d-w-list-item",drop:function(b,e){function f(d){var f=e.draggable.data("dragData"),g=d;g.id=c.getUniqueId(),g.wName=f.label,g.cjsObjName=f.cjsObjName,g.selected=!0,g.top=b.clientY-$(b.target).offset().top-3,g.left=b.clientX-$(b.target).offset().left-3,a.addWidget(g,!0)}d.getJson("ngApp/designer/widget/widget.data.json",f)}}},a.initWidget=function(c){var d=a.getSelectedDashboard();b(function(){d.Info.ObjMap=d.Info.ObjMap||{},d.Info.WidgetMap=d.Info.WidgetMap||{},d.Info.WidgetMap[c.id]=c,d.Info.ObjMap[c.id]=new CanvasJS.Chart("CC_"+c.id),d.Info.ObjMap[c.id].options=c.Options,d.Info.ObjMap[c.id].render()},0,!0,d)},a.createConnection=function(d){for(var e,f,g=d.splice(0,1),h=d,i={id:c.getUniqueId(),label:"CSV-DP-"+(a.getSelectedDashboard().DataProvider.Offline.connections.length+1),type:"csv",sheets:[{id:c.getUniqueId(),label:"CSV",fields:[],records:[]}]},j=0;j<g[0].length;j++)e={id:c.getUniqueId(),label:g[0][j]},i.sheets[0].fields.push(e);for(var k=0;k<h.length;k++){f={};for(var l=0;l<h[k].length;l++)f[i.sheets[0].fields[l].id]=h[k][l];i.sheets[0].records.push(f)}b(function(b){a.getSelectedDashboard().DataProvider.Offline.connections.push(b),c.alert("success","Designer",b.label+" created")},0,!0,i)},a.addNewDataProvider=function(){$("<input type='file' accept='.csv'>").on("change",function(b){var c=b.target.files[0];Papa.parse(c,{delimiter:",",newline:"",header:!1,dynamicTyping:!1,preview:0,encoding:"",worker:!1,comments:!1,step:void 0,complete:function(b){a.createConnection(b.data)},error:void 0,download:!1,skipEmptyLines:!1,chunk:void 0,fastMode:void 0,beforeFirstChunk:void 0,withCredentials:void 0})}).trigger("click")},a.cxtMenuCfg={setOptionList:function(a){return[{id:"PREVIEW",label:"Preview"},{divider:!0},{id:"DATA_SOURCE",label:"Data Provider"},{id:"WIDGET_EXP",label:"Widgets Explorer"},{id:"WIDGET_BROWSER",label:"Widget Browser"},{divider:!0},{id:"COPY",label:"Copy"},{id:"PASTE",label:"Paste"},{id:"SELECT_ALL",label:"Select All"},{divider:!0},{id:"PROPS",label:"Properties"},{id:"CLOSE",label:"Close"}]},opnClicked:function(b,c){switch(c.id){case"PREVIEW":break;case"DATA_SOURCE":a.addNewDataProvider();break;case"WIDGET_EXP":break;case"WIDGET_BROWSER":break;case"COPY":break;case"PASTE":break;case"SELECT_ALL":break;case"PROPS":break;case"CLOSE":break;case"DELETE":}}},a.getDashboardStyle=function(a){return{background:"#ecf0f1",height:"calc( 100% - 5px )",width:"calc( 100% - 5px )",border:"2px solid #E0E0E0"}}}b.controller(a.controllers.dashboard,[a.ngVars.scope,a.ngVars.timeout,a.services.core,a.services.request,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","dm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.designer.module)}}(this,function(a,b){function c(b,c,d,e){b.init=function(){function d(a){b.widgetExpGroups=a.groups,c(function(){angular.element($(".d-w-group-wrapper .active")).click()},0)}var f=a.jsonPath.widgetExpData;b.openTabs=[],b.openDashboardIds=[],b.selectedDashboardId="",b.dashboardMap={},b.tabMap={},b.wExpGrLastClicked={},b.dsBuilderVisible=!1,b.wExpItemDragCfg={helper:"clone",appendTo:"body"},b.registerHotkeys(),e.getJson(f,d)},b.fDragConfig={helper:"clone"},b.fDropConfig={drop:function(a,e){var f=a.target.id,g=e.draggable.data("dragData"),h=angular.copy(g);dataSets=b.getSelectedWidgetsFromSelectedDashboard()[0].dataSets,c(function(a){"DIMS"==f?0!=a[0].dimensions.length||d.isDuplicateInArray(a[0].dimensions,h,"id")||a[0].dimensions.push(h):d.isDuplicateInArray(a[0].measures,h,"id")?console.info("Duplicate field!!"):a[0].measures.push(h)},0,!0,dataSets)}},b.getDashboard=function(a){return b.dashboardMap[a]},b.getSelectedDashboard=function(){return b.dashboardMap[b.selectedDashboardId]},b.getWidgetsOfSelectedDashboard=function(){var a=b.getSelectedDashboard(),c=[];return"object"==typeof a&&(c=b.getSelectedDashboard().Layout.widgets),c},b.getSelectedWidgetsFromSelectedDashboard=function(){for(var a=b.getWidgetsOfSelectedDashboard(),c=[],d=0;d<a.length;d++)a[d].selected&&c.push(a[d]);return c},b.isDashboardOpen=function(a){return b.dashboardMap.hasOwnProperty(a)},b.isRefWidget=function(a){return b.getSelectedDashboard().sWidgetIds.length>1&&b.getSelectedDashboard().sWidgetIds[0]==a.id},b.openDatasetBuilder=function(){b.dsBuilderVisible=!0},b.closeDatasetBuilder=function(){b.dsBuilderVisible=!1},b.registerHotkeys=function(){d.addHotkeys({combo:"ctrl+a",description:"Select all widgets",callback:function(a,c){a.preventDefault(),b.selectAllWidget()}}),d.addHotkeys({combo:"ctrl+up",description:"Align Top",callback:function(a,c){a.preventDefault(),b.alignTop()}}),d.addHotkeys({combo:"ctrl+right",description:"Align Right",callback:function(a,c){a.preventDefault(),b.alignRight()}}),d.addHotkeys({combo:"ctrl+down",description:"Align Bottom",callback:function(a,c){a.preventDefault(),b.alignBottom()}}),d.addHotkeys({combo:"ctrl+left",description:"Align Left",callback:function(a,c){a.preventDefault(),b.alignLeft()}}),d.addHotkeys({combo:"=+h",description:"Equal Height",callback:function(a,c){a.preventDefault(),b.equalHeight()}}),d.addHotkeys({combo:"=+w",description:"Equal Width",callback:function(a,c){a.preventDefault(),b.equalWidth()}}),d.addHotkeys({combo:"del",description:"Remove all selected widgets",callback:function(a,c){a.preventDefault(),b.removeAllSelectedWidgets()}}),d.addHotkeys({combo:"right",description:"Move Right",callback:function(a,c){a.preventDefault(),b.moveRight()}}),d.addHotkeys({combo:"left",description:"Move Left",callback:function(a,c){a.preventDefault(),b.moveLeft()}}),d.addHotkeys({combo:"up",description:"Move Up",callback:function(a,c){a.preventDefault(),b.moveUp()}}),d.addHotkeys({combo:"down",description:"Move Down",callback:function(a,c){a.preventDefault(),b.moveDown()}})},b.listWidget=function(a,c){b.widgetList=c.widgets},b.movePointer=function(a,b){var c=$(a.target).closest("li").position().left+5;$(".pointer").css("left",c)},b.groupClicked=function(a,c){b.wExpGrLastClicked.active=!1,c.active=!0,b.wExpGrLastClicked=c,b.listWidget(a,c),b.movePointer(a,c)},b.saveDashboard=function(a){d.alert("error","Designer","Service Error!!")},b.previewDashboard=function(a){d.alert("info","Designer","Preview enabled!!")},b.toggleRightPane=function(a){var b=$(".d-right-pane"),c=$(".d-dashboard-wrapper");b.hasClass("d-right-pane-hide")?(b.removeClass("d-right-pane-hide"),c.removeClass("d-dashboard-wrapper-full")):(b.addClass("d-right-pane-hide"),c.addClass("d-dashboard-wrapper-full"))},b.notify=function(a,e){switch(a){case"ADD_DASHBOARD":b.openDashboardIds.push(e.id),b.dashboardMap[e.id]=e,$('a[data-toggle="tab"]').off("shown.bs.tab").on("shown.bs.tab",function(a){var d=$(a.target)[0].id.split("_")[1];c(function(){b.selectedDashboardId=d},0)}),$("#TAB_"+e.id).click(),d.alert("success","Designer",e.Layout.title+" Added");break;case"REMOVE_DASHBOARD":var f=b.openDashboardIds.indexOf(e.id);b.openDashboardIds.splice(f,1),delete b.dashboardMap[e.id],b.openDashboardIds.length>f?b.selectedDashboardId=b.openDashboardIds[f]:b.selectedDashboardId=b.openDashboardIds[b.openDashboardIds.length-1],c(function(){$("#TAB_"+b.selectedDashboardId).click(),d.alert("info","Designer",e.Layout.title+" Removed")},0);break;case"OPEN_OTHER_TAB":c(function(){$("#TAB_"+e.id).click(),d.alert("info","Designer",e.title+" Mode")},0);break;case"REMOVE_SPECIAL_TAB":b.isto=!1}},b.addDashboard=function(c){function d(a){a.id=c.id,a.Layout.height=2200,a.Layout.width=2200,a.Layout.title=c.title,a.Layout.gredientColor="#0000",a.Layout.gredientRotation="90",b.notify("ADD_DASHBOARD",a)}var f=a.jsonPath.dashboardData;e.getJson(f,d)},b.openTab=function(a,c){var e={};if("DASHBOARD"==c&&b.openDashboardIds.length<4)e={type:0,id:d.getUniqueId(),title:"Untitled_"+b.openTabs.length},b.openTabs.push(e),b.addDashboard(e);else{switch(c){case"MANAGE":e={type:1,id:d.getUniqueId(),title:"Manage"};break;case"SETTINGS":e={type:1,id:d.getUniqueId(),title:"Settings"}}b.isto&&0!=b.openTabs[0].type&&b.openTabs.splice(0,1),d.insertAt(b.openTabs,e,0),b.isto=!0,b.loadSpecialPage(e),b.notify("OPEN_OTHER_TAB",e)}},b.loadSpecialPage=function(a){},b.closeTab=function(a,c){var e=b.dashboardMap[c.id];d.removeFromArray(b.openTabs,c),1!=c.type?b.notify("REMOVE_DASHBOARD",e):b.notify("REMOVE_SPECIAL_TAB",c)},b.openSettings=function(a){},b.updateOptions=function(a){return a.Options.data[0].type=a.cjsObjName,a},b.addWidget=function(a,f){function g(e){a.Options=e,a=b.updateOptions(a),f&&(b.getWidgetsOfSelectedDashboard().push(a),c(function(){d.alert("success","Designer",a.wName+" Added")},0,!0,a)),a.selected&&b.getSelectedDashboard().sWidgetIds.push(a.id)}e.getJson("ngApp/designer/widget/column-chart.data.json",g)},b.removeWidget=function(a){var e=b.getWidgetsOfSelectedDashboard().indexOf(a),f=a.wName;-1!=e&&(b.getWidgetsOfSelectedDashboard().splice(e,1),c(function(){d.alert("success","Designer",f+" Removed")},0))},b.removeFromSWidgets=function(a){var c=b.getSelectedDashboard(),d=c.sWidgetIds,e=d.indexOf(a);-1!=e&&d.splice(e,1)},b.removeAllSelectedWidgets=function(){for(var a=b.getSelectedWidgetsFromSelectedDashboard(),c=0;c<a.length;c++)b.removeWidget(a[c]),b.removeFromSWidgets(a[c].id)},b.openDashboard=function(a){if(b.isDashboardOpen(a.id))return c(function(){d.alert("error","Designer","Dashboard is already opened"),$("#TAB_"+a.id).click()},0),!1;var e={type:0,id:a.id,title:a.Layout.title};b.$timeout(function(){var c=a.Layout.widgets;b.openTabs.push(e),b.openDashboardIds.push(a.id),b.dashboardMap[a.id]=a,b.selectedDashboardId=a.id;for(var d=0;d<c.length;d++)b.addWidget(c[d])},0),$('a[data-toggle="tab"]').off("shown.bs.tab").on("shown.bs.tab",function(a){var d=$(a.target)[0].id.split("_")[1];c(function(){b.selectedDashboardId=d},0)}),$("#TAB_"+a.id).click(),d.alert("success","Designer",a.Layout.title+" has been loaded")},b.openFromLocal=function(a){function c(a){function c(a){var c=angular.fromJson(a.currentTarget.result);b.openDashboard(c)}var d=a.target.files[0],e=new FileReader;e.onload=c,e.readAsText(d)}$("<input type='file' accept='.njd'>").on("change",c).trigger("click")},b.exportToLocalDisk=function(a,c){var e,f,g,h,i=angular.copy(b.getSelectedDashboard()),j=i.Layout.widgets,k=i.Layout.title+".njd";delete i.Info.ObjMap,delete i.Info.WidgetMap;for(var l=0;l<j.length;l++)delete j[l].Options;e=angular.toJson(i),document.documentMode?(h=new Blob([e]),navigator.msSaveBlob(h,k)):Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?(f="data:application/...,"+encodeURIComponent(e),location.replace(f)):(f="text/json;charset=utf-8,"+encodeURIComponent(e),g=document.createElement("a"),g.href="data:"+f,g.download=k,document.body.appendChild(g),g.click(),document.body.removeChild(g)),d.alert("success","Designer",i.Layout.title+" has been exported as "+k+" to locak disk")},b.isSelectedWidget=function(a){return-1!=b.getSelectedDashboard().sWidgetIds.indexOf(a.id)},b.selectWidget=function(a){a.selected||(a.selected=!0,b.getSelectedDashboard().sWidgetIds.push(a.id))},b.deSelectWidget=function(a){var c=b.getSelectedDashboard().sWidgetIds.indexOf(a.id);-1!=c&&(a.selected=!1,b.getSelectedDashboard().sWidgetIds.splice(c,1))},b.selectAllWidget=function(){for(var a=b.getWidgetsOfSelectedDashboard(),c=0;c<a.length;c++)b.selectWidget(a[c])},b.deSelectAllWidget=function(){for(var a=b.getWidgetsOfSelectedDashboard(),c=0;c<a.length;c++)b.deSelectWidget(a[c])},b.handleWidgetSelection=function(a,c){var d=a?a.ctrlKey:!1,e=c.selected,f=b.getSelectedWidgetsFromSelectedDashboard().length>1;d?e?b.deSelectWidget(c):b.selectWidget(c):(b.deSelectAllWidget(),f?b.selectWidget(c):e||b.selectWidget(c))},b.alignLeft=function(){for(var a,c,d=b.getSelectedDashboard().sWidgetIds,e=b.getSelectedDashboard(),f=0;f<d.length;f++)a=e.Info.WidgetMap[d[f]],0==f?c=a.left:a.left=c},b.alignRight=function(){for(var a,c,d=b.getSelectedDashboard().sWidgetIds,e=b.getSelectedDashboard(),f=0;f<d.length;f++)a=e.Info.WidgetMap[d[f]],0==f?c=a.left+a.width:a.left=c-a.width},b.alignTop=function(){for(var a,c,d=b.getSelectedDashboard().sWidgetIds,e=b.getSelectedDashboard(),f=0;f<d.length;f++)a=e.Info.WidgetMap[d[f]],0==f?c=a.top:a.top=c},b.alignBottom=function(){for(var a,c,d=b.getSelectedDashboard().sWidgetIds,e=b.getSelectedDashboard(),f=0;f<d.length;f++)a=e.Info.WidgetMap[d[f]],0==f?c=a.top+a.height:a.top=c-a.height},b.alignCenterV=function(){for(var a,c,d=b.getSelectedDashboard().sWidgetIds,e=b.getSelectedDashboard(),f=0;f<d.length;f++)a=e.Info.WidgetMap[d[f]],0==f?c=a.top+a.height/2:a.top=c-a.height/2},b.alignCenterH=function(){for(var a,c,d=b.getSelectedDashboard().sWidgetIds,e=b.getSelectedDashboard(),f=0;f<d.length;f++)a=e.Info.WidgetMap[d[f]],0==f?c=a.left+a.width/2:a.left=c-a.width/2},b.equalDisanceH=function(){var a,c,d,e,f=b.getSelectedDashboard().sWidgetIds;if(f.length>2){a=b.getSelectedDashboard(),c=a.Info.WidgetMap[f[0]],d=a.Info.WidgetMap[f[1]],e=d.left-(c.left+c.width);for(var g=2;g<f.length;g++)c=d,d=a.Info.WidgetMap[f[g]],d.left=c.left+c.width+e}},b.equalDisanceV=function(){var a,c,d,e,f=b.getSelectedDashboard().sWidgetIds;if(f.length>2){a=b.getSelectedDashboard(),c=a.Info.WidgetMap[f[0]],d=a.Info.WidgetMap[f[1]],hDiff=d.top-(c.top+c.height);for(var g=2;g<f.length;g++)c=d,d=a.Info.WidgetMap[f[g]],d.top=c.top+c.height+e}},b.equalHeight=function(){for(var a,d,e,f=b.getSelectedDashboard().sWidgetIds,g=b.getSelectedDashboard(),h=0;h<f.length;h++)a=g.Info.WidgetMap[f[h]],0==h?d=a.height:(a.height=d,c(function(a){e=g.Info.ObjMap[a],e.render()},0,!0,a.id))},b.equalWidth=function(){for(var a,d,e,f=b.getSelectedDashboard().sWidgetIds,g=b.getSelectedDashboard(),h=0;h<f.length;h++)a=g.Info.WidgetMap[f[h]],0==h?d=a.width:(a.width=d,c(function(a){e=g.Info.ObjMap[a],e.render()},0,!0,a.id))},b.moveRight=function(){for(var a,c=b.getSelectedDashboard().sWidgetIds,d=b.getSelectedDashboard(),e=0;e<c.length;e++)a=d.Info.WidgetMap[c[e]],a.left++},b.moveLeft=function(){for(var a,c=b.getSelectedDashboard().sWidgetIds,d=b.getSelectedDashboard(),e=0;e<c.length;e++)a=d.Info.WidgetMap[c[e]],a.left--},b.moveUp=function(){for(var a,c=b.getSelectedDashboard().sWidgetIds,d=b.getSelectedDashboard(),e=0;e<c.length;e++)a=d.Info.WidgetMap[c[e]],a.top--},b.moveDown=function(){for(var a,c=b.getSelectedDashboard().sWidgetIds,d=b.getSelectedDashboard(),e=0;e<c.length;e++)a=d.Info.WidgetMap[c[e]],a.top++},b.reachedToEdge=function(a,c){var d=b.getSelectedDashboard().id,e=$("#MAIN_"+d);return 5>a||a>e.height()||5>c||c>e.width()},b.sendToBack=function(){},b.sendBackward=function(){},b.bringToFront=function(){},b.bringForward=function(){}}b.controller(a.controllers.designer,[a.ngVars.scope,a.ngVars.timeout,a.services.core,a.services.request,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","wm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.widget.module)}}(this,function(a,b){function c(a,b,c){a.init=function(){a.widgetResizeConfig={handles:{n:".r-handle-n",e:".r-handle-e",s:".r-handle-s",w:".r-handle-w",ne:".r-handle-ne",se:".r-handle-se",sw:".r-handle-sw",nw:".r-handle-nw"},start:function(c,d){b(function(){a.preventClick=!0},0)},stop:function(c,d){c.stopPropagation(),b(function(){var b=d.element.find(".widget")[0].id,c=a.getSelectedDashboard(),e=c.Info.WidgetMap[b],f=c.Info.ObjMap[b];e.height=d.size.height,e.width=d.size.width,e.left=d.position.left,e.top=d.position.top,a.preventClick=!1,f.render()},0)}},a.wDragConfig={containment:"parent",start:function(c,d){b(function(){a.preventClick=!0},0)},stop:function(c,d){b(function(){var b=d.helper.find(".widget")[0].id,c=a.getSelectedDashboard(),e=c.Info.WidgetMap[b];e.left=d.position.left,e.top=d.position.top,a.preventClick=!1},0)}}},a.onClickWidget=function(b,c){a.handleWidgetSelection(b,c)},a.getWidgetContainerStyle=function(a){return{top:a.top+"px",left:a.left+"px",height:a.height+"px",width:a.width+"px"}},a.cxtMenuWidCfg={setOptionList:function(b){var c,d=[];return a.getSelectedWidgetsFromSelectedDashboard().length>1?d=[{id:"ALIGN_TOP",label:"Align Top"},{id:"ALIGN_RIGHT",label:"Align Right"},{id:"ALIGN_BOTTOM",label:"Align Bottom"},{id:"ALIGN_LEFT",label:"Align Left"},{divider:!0},{id:"EQUAL_HEIGHT",label:"Equal Height"},{id:"EQUAL_WIDTH",label:"Equal Width"},{divider:!0},{id:"EQUAL_DISTANCE_H",label:"Equal Distance(H)"},{id:"EQUAL_DISTANCE_V",label:"Equal Distance(V)"},{id:"CENTER_H",label:"Center(H)"},{id:"CENTER_V",label:"Center(V)"},{divider:!0},{id:"DELETE",label:"Delete"}]:(a.deSelectAllWidget(),c=angular.element(b.target.closest(".widget")).scope().w,a.selectWidget(c),d=[{id:"PROPERTIES",label:"Properties"},{divider:!0},{id:"DATA_SET",label:"Data Set"},{id:"SCRIPTS",label:"Scripts"},{divider:!0},{id:"DELETE",label:"Delete"}]),d},opnClicked:function(b,c){switch(c.id){case"ALIGN_LEFT":a.alignLeft();break;case"ALIGN_TOP":a.alignTop();break;case"ALIGN_RIGHT":a.alignRight();break;case"ALIGN_BOTTOM":a.alignBottom();break;case"EQUAL_HEIGHT":a.equalHeight();break;case"EQUAL_WIDTH":a.equalWidth();break;case"EQUAL_DISTANCE_H":a.equalDisanceH();break;case"CENTER_H":a.alignCenterH();break;case"CENTER_V":a.alignCenterV();break;case"DELETE":a.removeAllSelectedWidgets();break;case"DATA_SET":a.openDatasetBuilder()}}}}b.controller(a.controllers.widget,[a.ngVars.scope,a.ngVars.timeout,a.services.core,c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","bcm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.breadcrumb.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.breadcrumb.tUrl,controller:a.controllers.breadcrumb,controllerAs:"bcvm",compile:d}}function d(){return e}function e(){}b.directive(a.directives.breadcrumb.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","hm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.header.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.header.tUrl,controller:a.controllers.header,compile:d}}function d(){return e}function e(){}b.directive(a.directives.header.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","mam"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.mainArea.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.mainArea.tUrl,controller:a.controllers.mainArea,compile:d}}function d(){return e}function e(){}b.directive(a.directives.mainArea.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","mmm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.mainMenu.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.mainMenu.tUrl,controller:a.controllers.mainMenu,controllerAs:"mmvm",compile:d}}function d(){return e}function e(){}b.directive(a.directives.mainMenu.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","dbm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";
b(a.portal.ac,a.portal.ac.modules.dashboard.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.dashboard.tUrl,controller:a.controllers.dashboard,compile:d}}function d(){return e}function e(){}b.directive(a.directives.dashboard.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","dm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.designer.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.header.tUrl,controller:a.controllers.header,controllerAs:"hvm",compile:d}}function d(){return e}function e(){}b.directive(a.directives.header.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","wm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.widget.module)}}(this,function(a,b){function c(){return{restrict:"E",replace:!0,templateUrl:a.directives.widget.tUrl,controller:a.controllers.widget,controllerAs:"hvm",compile:d}}function d(){return e}function e(){}b.directive(a.directives.widget.name,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","bcm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.breadcrumb.module)}}(this,function(a,b){function c(){}b.service(a.services.breadcrumb,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","cm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.core.module)}}(this,function(a,b){function c(a,b){var c=this;c.addHotkeys=function(a){b.add(a)},c.alert=function(b,c,d){a.pop(b,c,d)},c.getPouchDbInstance=function(a){return new pDb(a)},c.removeFromArray=function(a,b){var c;Array.isArray(a)&&(c=a.indexOf(b),-1!=c?a.splice(c,1):console.info("cs.removeFromArray( arr, item ): Item not found!!"))},c.isDuplicateInArray=function(a,b,c){if(Array.isArray(a)&&"object"==typeof b&&"string"==typeof c&&b.hasOwnProperty(c)){for(var d=0;d<a.length;d++)if(a[d][c]==b[c])return!0;return!1}},c.getUniqueId=function(a){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()},c="";if(a=a||16,"number"==typeof a)for(var d=0;a>d;d++)d>0&&(c+="-"),c+=b();return c},c.counter=function(){var a=0;return function(b){return b>=0&&(a=b),0>b?0:++a}},c.filterItemInList=function(a,b,c){var d=function(a,d){var e=typeof a;if("undefined"!=e)switch(e){case"object":return a[b]==c;case"string":return a==b;case"function":return a==b}};return $.grep(a,d)},c.insertAt=function(a,b,c){return a.splice(c,0,b),a}}b.service(a.services.core,["toaster","hotkeys",c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.header.module)}}(this,function(a,b){}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","mam"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.mainArea.module)}}(this,function(a,b){function c(){}b.service(a.services.mainArea,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.mainMenu.module)}}(this,function(a,b){function c(){}b.service(a.services.mainMenu,[c])}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","cm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.core.module)}}(this,function(a,b){function c(a){var b=this;b.loginInfo={},b.showLoader=!1,b.getUrl=function(a){return b.getBaseUrl()+a},b.getBaseUrl=function(){var a="http://";return a+=acfg.server.ip+":",a+=acfg.server.port+"/",a+=acfg.server.contextPath+"/"},b.getJson=function(a,c){b.doGetRequest(a,c)},b.getRequestHeaders=function(){var a,c={};c["Content-Type"]="application/json";try{if(a=b.loginInfo.userAuth)return c.authtoken=a.authToken,c.spacekey=a.spaceKey,c.userid=a.id,c}catch(d){return console.error(d),c}return c},b.doRequest=function(c,d,e){var f={method:"GET",traditional:!0,crossDomain:!0,async:!0,headers:b.getRequestHeaders()||{}},g=angular.extend({},f,c);b.showLoader=!0,a(g).success(function(a,c,e,f){d&&"function"==typeof d&&d(a,c,e,f),b.showLoader=!1}).error(function(a,c,d,f){console.info("$http request ERROR!!!"),e&&"function"==typeof e&&e(a,c,d,f),b.showLoader=!1})},b.doPostRequest=function(a,c,d,e){var f={url:a,data:c,method:"POST"};b.doRequest(f,function(a,b,c,e){d&&"function"==typeof d&&d(a,b,c,e)},function(a,b,c,d){e&&"function"==typeof e&&e(a,b,c,d)})},b.doPostRequest4Json=function(a,c,d,e){var f={url:a,data:c,method:"POST"};b.doRequest(f,function(a,b,c,e){d&&"function"==typeof d&&d(a,b,c,e)},function(a,b,c,d){e&&"function"==typeof e&&e(a,b,c,d)})},b.doGetRequest=function(a,c,d){var e={url:a,method:"GET"};b.doRequest(e,function(a,b,d,e){c&&"function"==typeof c&&c(a,b,d,e)},function(a,b,c,e){d&&"function"==typeof d&&d(a,b,c,e)})}}b.service(a.services.request,[a.ngVars.http,c])}),function(a,b){"use strict";"function"==typeof define&&define.amd||"object"==typeof module&&module.exports}(this,function(){}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","dm"],b);else if("object"==typeof module&&module.exports);else{if(a.portal=a.portal||{},!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.portal.ac.modules.designer.module)}}(this,function(a,b){}),function(a,b){"use strict";"function"==typeof define&&define.amd||"object"==typeof module&&module.exports}(this,function(){}),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ac","angular","jsfileloader"],b);else if("object"==typeof module&&module.exports);else{if(!a.portal.ac)throw"app-config not found";b(a.portal.ac,a.angular)}}(this,function(a,b){b.bootstrap(document,[a.modules.core.module.name])});
//# sourceMappingURL=app.min.js.map